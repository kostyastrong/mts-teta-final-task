<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <title>Tag Manager</title>


        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


        <style>
.bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
      body {
        padding-top: 5rem;
      }
      
    </style>
     <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="#"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
<!--<li class="nav-item"><a href="index.html" class="nav-link">На главную страницу</a></li-->
  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link"  href="index.html" class="nav-link">На главную страницу <span class="sr-only">(current)</span></a>
      </li>
     
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Информация о сайте</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="primer.html">Регистрация</a>
        </div>
      </li>
    </ul>
  </div>
</nav>
</head>
<body>


<main role="main" class="container">

<div class="container-fluid">
  <h1>Зарегистрируй свои события!</h1>
  <div>
    <form id="form">
      <div class="form-group">
        <label for="name">Логин:</label>
        <input name="name" id="name" value=" ">
      </div>
      <div class="form-group">
        <label for="password">Пароль:</label>
        <input type="password" name="password" id="password" >
      </div>
      <div class="form-group">
        <label for="application">Название приложения:</label>
        <input name="application" id="application" >
      </div>
      <div class="form-group">
        <label for="containers">Укажите контейнер:</label>

        <select name="containers" id="containers" class="form-control">
          <option value="">--Please choose an option--</option>
          <option value="dog">Контейнер: клики и скроллы</option>
          <option value="cat">Контейнер: текстовые поля и переходы по ссылкам</option>
          <option value="hamster">Контейнер: количество пользователей</option>
          
        </select>

      </div>

      <div></div>
      <div></div>


      
    </form>
    <!--  <button id="reg" onClick="registration" >Register</button>-->
   <!-- <button class="btn btn-primary" id="reg" onclick="{registration()}" ><a href="3slaid.html">Registration</a></button> -->
    <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                <button id="sign_in" type="button" class="btn btn-outline-secondary btn-lg px-4">
                    Регистрация
                    <!-- a href="3slaid.html">Регистрация</a-->
                </button>
            </div>
<br>
  </div>
</div>
</main><!-- /.container -->

<!-- scripts for registration -->
<script>
    (function(){
        let registration_button = document.getElementById('sign_in');
        registration_button.addEventListener('click', function(){

            async function send(data) {
                let text = JSON.stringify(data);
                appRequestUrl = 'http://localhost:8080/api/app?name=' + data.application;
                const appResponse = await fetch(appRequestUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                });

                containerRequestUrl = 'http://localhost:8080/api/container/app/' + '1' + '?name=' + data.container;
                const containerResponse = await fetch(containerRequestUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    }
                });
            }

            // let selected = []
            // for (let opt of document.getElementById("triggers").selectedOptions) {
            //     selected.push(opt.value)
            // }
            let register = {
                name: document.getElementById("name").value,
                password: document.getElementById("password").value,
                application: document.getElementById("application").value,
                container: document.getElementById("containers").value,
                // triggers: selected
            }
            send(register);
        })
    })()
</script>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</html>
